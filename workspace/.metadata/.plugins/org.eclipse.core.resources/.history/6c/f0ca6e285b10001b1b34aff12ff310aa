package com.Example.converter;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.Example.model.Geometry;
import com.Example.model.Location;
import com.Example.model.Type;
import com.Example.model.TypeDTO;
import com.Example.service.ITypeService;

@Component
public class TypeConvert {
	
	@Autowired
	private ITypeService typeService;
	
	public Type toEntity(TypeDTO type) {
		Type newType = new Type();
		Location location = new Location();
		location.setLat(type.getLatitude());
		location.setLng(type.getLongitude());
		Geometry geometry = new Geometry();
		geometry.setCoordinates(type.getCoordinatesPoint());
		geometry.setType(type.getTypePolygons());
		
		if(type.getId() != null) {
			Type oldtype = typeService.findOne(type.getName());
			oldtype.setAddress(type.getAddress());
			oldtype.setDescription(type.getDescription());
			oldtype.setName(type.getName());
			oldtype.setPhone(type.getPhone());
			oldtype.setSource(type.getSource());
			oldtype.setWebsite(type.getWebsite());
			oldtype.setLocation(location);
			oldtype.setGeometry(geometry);
			return oldtype;
		}
		
		newType.setAddress(type.getAddress());
		newType.setDescription(type.getDescription());
		newType.setName(type.getName());
		newType.setPhone(type.getPhone());
		newType.setSource(type.getSource());
		newType.setWebsite(type.getWebsite());
		newType.setLocation(location);
		newType.setGeometry(geometry);
		
		return newType;
	}

}
